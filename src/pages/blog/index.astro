---
import Layout from "../../layouts/Layout.astro";
import BlogsBanner from "../../assets/img/Banner.avif";
import Divider from "../../assets/svg/Vector 3.svg";

import FormattedDate from "../../components/FormattedDate.astro";
import {getCollection} from 'astro:content';
const posts = (await getCollection('blog')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),);
---
<Layout
        title="Codies Coder - Software Engineering Insights By Ajay Negi"
        description="Each month, we dive deep into a single topic in software engineering, breaking it down in a way thatâ€™s easy to grasp and fun to explore. Whether you're just starting out or already a pro, you'll always walk away with something new to think about.">

    <!-- Main Content Section -->
    <section class="blogs-main-content-section">

        <!-- Breadcrumb Navigation -->
        <nav class="breadcrumb-nav" role="navigation" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/" class="breadcrumb-link" aria-label="Go to home page">
                        <svg class="breadcrumb-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                             fill="currentColor">
                            <path d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"></path>
                            <path d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"></path>
                        </svg>
                    </a>
                </li>
                <span class="breadcrumb-divider">/</span>
                <li class="breadcrumb-item">
                    <a href="#" class="breadcrumb-link" aria-current="page">Blog</a>
                </li>
            </ol>
        </nav>

        <!-- Banner Section -->
        <div class="blogs-Banner">
            <img src={BlogsBanner.src}
                 alt="Codies Coder Blog Banner showcasing software engineering topics"
                 decoding="async"
                 loading="eager"
                 fetchpriority="high"/>
        </div>

        <!--Search Box-->
        <div class="search-box-container">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                 class="lucide-icon" aria-hidden="true">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
            </svg>

            <label for="search-input" class="sr-only"></label>
            <input
                    type="text"
                    id="search-input"
                    class="search-input"
                    placeholder="Search Blog Posts"
                    aria-label="Search Blog Posts"
                    autocomplete="true"
                    spellcheck="true"
                    autocorrect="true"
            />
        </div>

        <!-- Not Found Search Result -->
        <div class="no-search-results" id="search-no-results"
             style=" display: none;
                     flex-direction: column;
                     justify-content: center;
                     align-items: center;
                     height: 50vh;
                     padding: 4rem 2rem;
                     color: rgba(255, 255, 255, 0.6);
                     transition: opacity 0.2s ease;
">

            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="60" height="60" viewBox="0 0 128 128"
                 fill="white">
                <path d="M 52.349609 14.400391 C 42.624609 14.400391 32.9 18.1 25.5 25.5 C 10.7 40.3 10.7 64.399219 25.5 79.199219 C 32.9 86.599219 42.600391 90.300781 52.400391 90.300781 C 62.200391 90.300781 71.900781 86.599219 79.300781 79.199219 C 94.000781 64.399219 93.999219 40.3 79.199219 25.5 C 71.799219 18.1 62.074609 14.400391 52.349609 14.400391 z M 52.300781 20.300781 C 60.500781 20.300781 68.700391 23.399219 74.900391 29.699219 C 87.400391 42.199219 87.4 62.5 75 75 C 62.5 87.5 42.199219 87.5 29.699219 75 C 17.199219 62.5 17.199219 42.199219 29.699219 29.699219 C 35.899219 23.499219 44.100781 20.300781 52.300781 20.300781 z M 52.300781 26.300781 C 45.400781 26.300781 38.9 29 34 34 C 29.3 38.7 26.700391 44.800391 26.400391 51.400391 C 26.300391 53.100391 27.600781 54.4 29.300781 54.5 L 29.400391 54.5 C 31.000391 54.5 32.300391 53.199609 32.400391 51.599609 C 32.600391 46.499609 34.699219 41.799219 38.199219 38.199219 C 41.999219 34.399219 47.000781 32.300781 52.300781 32.300781 C 54.000781 32.300781 55.300781 31.000781 55.300781 29.300781 C 55.300781 27.600781 54.000781 26.300781 52.300781 26.300781 z M 35 64 A 3 3 0 0 0 32 67 A 3 3 0 0 0 35 70 A 3 3 0 0 0 38 67 A 3 3 0 0 0 35 64 z M 83.363281 80.5 C 82.600781 80.5 81.850781 80.800391 81.300781 81.400391 C 80.100781 82.600391 80.100781 84.499609 81.300781 85.599609 L 83.800781 88.099609 C 83.200781 89.299609 82.900391 90.6 82.900391 92 C 82.900391 94.4 83.8 96.700391 85.5 98.400391 L 98.300781 111 C 100.10078 112.8 102.39922 113.69922 104.69922 113.69922 C 106.99922 113.69922 109.29961 112.79961 111.09961 111.09961 C 114.59961 107.59961 114.59961 101.90039 111.09961 98.400391 L 98.300781 85.599609 C 96.600781 83.899609 94.300391 83 91.900391 83 C 90.500391 83 89.2 83.300391 88 83.900391 L 85.5 81.400391 C 84.9 80.800391 84.125781 80.5 83.363281 80.5 z M 91.900391 88.900391 C 92.700391 88.900391 93.5 89.200781 94 89.800781 L 106.69922 102.5 C 107.89922 103.7 107.89922 105.59922 106.69922 106.69922 C 105.49922 107.89922 103.6 107.89922 102.5 106.69922 L 89.800781 94.099609 C 89.200781 93.499609 88.900391 92.700391 88.900391 91.900391 C 88.900391 91.100391 89.200781 90.300781 89.800781 89.800781 C 90.400781 89.200781 91.100391 88.900391 91.900391 88.900391 z"></path>
            </svg>
            <h3>No results found</h3>
            <p>Try adjusting your search terms</p>
        </div>


        <!-- Blog Post Container -->
        {
            posts.map((post) => (

                    <article class="blog-post-container"
                             data-tags={(post.data.tags || []).join(',')}
                             data-category={post.data.category || ''}>

                        <div class="blog-post-left-side-container">
                            <h5 class="post-title">{post.data.title}</h5>
                            <p>{post.data.description}</p>
                            <div class="blog-post-links">

                                <div class="post-link">
                                    <a href={`/blog/${post.id}/`} aria-label="Read more about Java Architecture">
                                        <span>Read More</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                             viewBox="0 0 24 24"
                                             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                             stroke-linejoin="round" class="lucide lucide-external-link"
                                             aria-hidden="true">
                                            <path d="M15 3h6v6"></path>
                                            <path d="M10 14 21 3"></path>
                                            <path d="m18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                        </svg>
                                    </a>
                                </div>

                                {post.data.substack && (
                                        <div class="post-link">
                                            <a href={post.data.substack}
                                               target="_blank" rel="noopener noreferrer"
                                               aria-label="Read more about Java Architecture">
                                                <span>Read Substack</span>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                                                     viewBox="0 0 24 24"
                                                     fill="none" stroke="currentColor" stroke-width="2"
                                                     stroke-linecap="round"
                                                     stroke-linejoin="round" class="lucide lucide-external-link"
                                                     aria-hidden="true">
                                                    <path d="M15 3h6v6"></path>
                                                    <path d="M10 14 21 3"></path>
                                                    <path d="m18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                                </svg>
                                            </a>
                                        </div>
                                )}
                            </div>
                        </div>
                        <div class="blog-post-right-side-container">
                            <img src={post.data.heroImage} alt="Diagram illustrating Java Architecture"
                                 decoding="async" loading="lazy" fetchpriority="auto" />
                        </div>
                    </article>
            ))
        }
    </section>

    <section class="sperator-divider-container">
        <img src={Divider.src} alt="Sperator Divider"/>
    </section>

    <!-- Newsletter Subscription Section -->
    <section class="substack-newsletter-section">
        <iframe src="https://codiescoder.substack.com/embed" width="480" height="320" style="background:white;"
                title="Codies Coder Newsletter Subscription"></iframe>
    </section>

    <script>
        document.addEventListener('astro:page-load', () => {
            const searchInput = document.getElementById('search-input');
            const blogPosts = document.querySelectorAll('.blog-post-container');
            const noResultsBlock = document.getElementById('search-no-results');

            // Debounce function to avoid rapid calls
            function debounce(func, delay) {
                let timer;
                return function (...args) {
                    clearTimeout(timer);
                    timer = setTimeout(() => func.apply(this, args), delay);
                };
            }

            function filterPosts(query) {
                const searchTerm = query.toLowerCase().trim();
                let hasResults = false;

                blogPosts.forEach(post => {
                    const title = post.querySelector('.post-title')?.textContent.toLowerCase() || '';
                    const description = post.querySelector('p')?.textContent.toLowerCase() || '';

                    // Optional fields â€” You can also extract as data-* attributes
                    const tags = post.getAttribute('data-tags')?.toLowerCase() || '';
                    const category = post.getAttribute('data-category')?.toLowerCase() || '';

                    const matches = [title, description, tags, category].some(field =>
                        field.includes(searchTerm)
                    );

                    if (matches || searchTerm === '') {
                        post.style.display = 'flex';
                        post.style.opacity = '1';
                        hasResults = true;
                    } else {
                        post.style.display = 'none';
                    }
                });

                noResultsBlock.style.display = hasResults ? 'none' : 'flex';
            }

            // Attach event with debounce
            searchInput.addEventListener('input', debounce((e) => {
                filterPosts(e.target.value);
            }, 150)); // 150ms delay
        });
    </script>

</Layout>


<style>
    /* Breadcrumb Navigation */
    .breadcrumb-nav {
        padding: 0.5rem 0;
        width: 100%;
        border-bottom: 1px solid rgb(38 38 38/1);
    }

    .breadcrumb-list {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
        gap: 0.5rem;
        width: 100%;
        font-size: 1rem;
        list-style-type: none;
        color: #ffffffb3;
    }

    .breadcrumb-link > svg {
        width: 1.1rem;
        height: auto;
    }

    .breadcrumb-item {
        display: flex;
        align-items: center;
    }

    .breadcrumb-link {
        font-weight: normal;
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
    }

    .breadcrumb-link:hover {
        color: rgba(226, 232, 240, 1);
    }

    .breadcrumb-divider {
        color: #fff6;
    }

    .breadcrumb-item span {
        color: rgba(38, 38, 38, 0.7);
    }


    /* Blogs Hero Section*/
    .blogs-Banner {
        width: 100%;
        height: auto;
        padding: 0;
        margin: 0;
        border-radius: 5px;
        overflow: hidden;
    }

    .blogs-Banner > img {
        padding: 0;
        margin: 0;
        width: 100%;
        height: auto;
        border-radius: 5px;
    }


    /* Search Box Section */
    .search-box-container {
        position: relative;
    }

    .search-input {
        font-family: 'Inter', sans-serif;
        font-weight: normal;
        letter-spacing: 0.5px;
        font-size: 14px;
        color: var(--heading);
        width: 100%;
        height: 44px;
        padding: 0 10px 0 40px;
        border-radius: 8px;
        border: 1px solid var(--card-border);
        background-color: var(--bg);
        outline: none;
        transition: all 0.2s ease-in-out;

    }

    .search-input::placeholder {
        color: rgb(157, 163, 174);
    }

    .search-input:focus::placeholder {
        color: var(--heading);
    }

    .search-input:focus {
        border-color: var(--text5);
        background-color: #ffffff0d;
    }

    .lucide-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
    }


    // Not Found Search Result
    .no-search-results svg {
        margin-left: -15px;
        opacity: 0.5;
    }

    .no-search-results h3 {
        font-size: 1.5rem;
        font-weight: 500;
        margin-bottom: 0.3rem;
        color: rgba(255, 255, 255, 0.8);
    }

    .no-search-results p {
        font-size: 1rem;
        opacity: 0.7;
    }


    /* Blog Post Section */
    .blog-post-container {
        margin-top: 2rem;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        gap: 0.5rem;
        width: 100%;
        padding: 1rem;
        border-radius: 10px;
        border: 1px solid rgb(38 38 38/1);
        transition: border 0.3s ease-in-out;
        background-color: transparent;

        overflow: hidden;
        backdrop-filter: blur(20px);
        position: relative;
    }

    .blog-post-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: left 0.5s ease;
    }

    .blog-post-container:hover::before {
        left: 100%;
    }

    .blog-post-container:hover {
        //border: 1px solid var(--text5);
        cursor: pointer;
        //background-color: #ffffff0d;

        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), transparent);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .blog-post-container > .blog-post-left-side-container {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 0.3rem;
    }

    .blog-post-left-side-container > h5 {
        color: var(--subheading);
    }

    .blog-post-left-side-container > p {
        font-size: 14px;
        font-weight: normal;
        letter-spacing: 0.3px;
        line-height: 1.3;
        color: var(--text3);
    }

    .blog-post-links {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
        gap: 0.5rem;
        width: 100%;
        margin-top: 0.3rem;
    }

    .blog-post-links > .post-link {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        gap: 0.2rem;
        font-size: 13px;
        border-radius: 5px;
        background-color: #26262699;
        border: 1px solid rgb(38 38 38 / 2);
        color: var(--text5);
    }

    .post-link > a {
        padding: 0.25rem 0.5rem;
        color: rgb(212 212 212 / 1); /* #D4D4D4FF */
    }

    .post-link:hover > a > span,
    .post-link:hover > a > svg {
        color: var(--link-hover);
        cursor: pointer;
    }

    .blog-post-links > .post-link > a > svg {
        font-size: 13px;
    }

    .blog-post-right-side-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .blog-post-right-side-container > img {
        width: 200px;
        height: auto;
        border-radius: 5px;
    }

    @media (max-width: 599px) {
        .blog-post-container {
            flex-direction: column-reverse;
            gap: 0.5rem;
            padding: 0.8rem;
        }

        .blog-post-left-side-container > h5 {
            margin-bottom: 0.3rem;
        }

        .blog-post-right-side-container > img {
            width: 100%;
            height: auto;
        }
    }


    /* Green Arrow Section */
    .sperator-divider-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .sperator-divider-container > img {
        margin-left: 11.55rem;
        width: auto;
        height: 10rem;
    }


    /* Substack Newsletter Section */
    .substack-newsletter-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        background: #fff;
        border: 1px solid #EEE;
        border-radius: 10px;
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin-top: 0.3rem;
    }

    .substack-newsletter-section > iframe {
        width: 480px;
        height: 320px;
        overflow: hidden;
    }

    @media (max-width: 499px) {
        .sperator-divider-container > img {
            margin-left: 9.5rem;
            width: auto;
            height: 8rem;
        }
    }

    @media (max-width: 499px) {
        .substack-newsletter-section > iframe {
            width: 90vw;
            height: 100vw;
        }
    }
</style>